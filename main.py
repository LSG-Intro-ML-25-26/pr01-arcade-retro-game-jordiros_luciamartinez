@namespace
class SpriteKind:
    Decorativo = SpriteKind.create()
    Map = SpriteKind.create()

def on_a_pressed():
    if not (menu):
        SistemaDeDobleSalto()
controller.A.on_event(ControllerButtonEvent.PRESSED, on_a_pressed)

def GenerarMinimapa():
    global myMinimap, mapStripe
    sprites.destroy(mapStripe)
    myMinimap = minimap.minimap(MinimapScale.SIXTEENTH, 1, 15)
    mapStripe = sprites.create(minimap.get_image(myMinimap), SpriteKind.Map)
    minimap.include_sprite(myMinimap, prota, MinimapSpriteScale.DOUBLE)
    mapStripe.set_position(scene.camera_property(CameraProperty.X) + 54,
        scene.camera_property(CameraProperty.Y) - 44)

def on_left_pressed():
    animation.run_image_animation(prota,
        assets.animation("""
            heroWalkLeft
            """),
        100,
        True)
controller.left.on_event(ControllerButtonEvent.PRESSED, on_left_pressed)

def on_right_released():
    animation.run_image_animation(prota,
        assets.animation("""
            heroWalkRight
            """),
        100,
        False)
controller.right.on_event(ControllerButtonEvent.RELEASED, on_right_released)

def on_left_released():
    animation.run_image_animation(prota,
        assets.animation("""
            heroWalkLeft
            """),
        100,
        False)
controller.left.on_event(ControllerButtonEvent.RELEASED, on_left_released)

def GenerarNivel():
    if nivel == 1:
        scene.set_background_image(assets.image("""
            myImage1
            """))
        tiles.set_current_tilemap(tilemap("""
            nivel1
            """))
        prota.y = 460
        prota.x = 20
    elif nivel == 2:
        scene.set_background_image(assets.image("""
            myImage
            """))
        tiles.set_current_tilemap(tilemap("""
            level
            """))
        prota.y = 60
        prota.x = 20
    elif nivel == 3:
        scene.set_background_image(assets.image("""
            myImage0
            """))
        tiles.set_current_tilemap(tilemap("""
            nivel3
            """))
        prota.y = 460
        prota.x = 20
def SistemaDeDobleSalto():
    global salto
    if prota.is_hitting_tile(CollisionDirection.BOTTOM):
        prota.set_velocity(0, -125)
        salto = True
        music.play(music.create_song(hex("""
                00f4010408020105001c000f0a006400f4010a00000400000000000000000000000000000000020c0000000400012704000800012a
                """)),
            music.PlaybackMode.IN_BACKGROUND)
    elif salto == True:
        prota.set_velocity(0, -125)
        salto = False
        music.play(music.create_song(hex("""
                00f4010408020105001c000f0a006400f4010a00000400000000000000000000000000000000020c0000000400012704000800012a
                """)),
            music.PlaybackMode.IN_BACKGROUND)

def on_right_pressed():
    animation.run_image_animation(prota,
        assets.animation("""
            heroWalkRight
            """),
        100,
        True)
controller.right.on_event(ControllerButtonEvent.PRESSED, on_right_pressed)

def MostrarLore():
    game.set_dialog_text_color(2)
    game.set_dialog_frame(img("""
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        f f f f f f f f f f f f f f f f
        """))
    game.show_long_text("El caballero End debe adentrarse al castillo oscuro y derrotar a los 3 reyes que gobiernan el reino Nochesfera, restaurando as√≠ la paz.",
        DialogLayout.FULL)
def CreacionPersonajes():
    global prota
    info.set_life(3)
    prota = sprites.create(assets.image("""
            ParadaPerfilDerecho
            """),
        SpriteKind.player)
    controller.move_sprite(prota, 100, 0)
    scene.camera_follow_sprite(prota)
    prota.ay = 200
salto = False
nivel = 0
prota: Sprite = None
myMinimap: minimap.Minimap = None
mapStripe: Sprite = None
menu = False
menu = True
partida = False
scene.set_background_image(img("""
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111d77d11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111117777779111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111177777777777777711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111d777777777777779111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111111111111111d77d11d77777777d1111111111111111111111111111111111111111111111111111111111111111111111111111111111711111111111111111111111111111111111
1111111111111111111111117777d11111d7777111111111111111111111111111111111111111111111111111111111111111111111111111111111117711111111111111111111111111111111111
1111111111111111111111177777d111111d771111111111111111111111111111111111111111111111111111111111111111111111111111771111177711111111111111111111111111111111111
1111111111111111111111777777d111119791111111111111111111111111111111111111111111111111111111111111111111111111111177d111977711111111111111111111111111111111111
11111111111111111111177d7777d1111777777d111111111111199111111111111911111119111111111111119d11111111111111d9111111d7111d777711111111111117111111111111111111111
1111111111111111111177917777d111777777777d111111111d77779d11d11111777d1111777111d1111111d77779d11d111111197777d1119711177777999d111111d777711111111111111111111
1111111111111111111777117777d1d77777777777d11111977777777777711117777711177777d971111777777777777711111d7777777777711177777777771111d77777771111111111111111111
111111111111111111977d117777d9777ddd77777771111117d777777777d1117d7777d17777777711111d7d7777777771111d777777777777d11d777777777711d777797777d111111111111111111
11111111111111111177711177777779111111977777111117111d9777771111d1777777d17777771111117111d7777771111d7777d777777911111d777711111197777177777d11111111111111111
1111111111111111197771117777717911111119777711111d71111d77771111117777711117777d111111991111977771111d77771111197111111d777711111197777117777711111111111111111
1111111111111111177771117777d179111111117777d1111171111d77771111117777911117777d111111171111977791111d77771111d71111111d777711111197777111777771111111111111111
1111111111111111177771117777d17911111111d777d1111197111d77771111117777911117777d111111177111977791111d77771111771111111d777711111197777111d777d1111111111111111
1111111111111111d77771117777d177911111117777d1111d777d1d77771111117777911117777d111111d777d1977791111d77771117777111111d777711111197777111d77111111111111111111
1111111111111111d77771117777d1771777777d177711111771197777771111117777911117777d111111771177777791111d777777777777d1111d777711111197777117791111111111111111111
1111111111111111d77771117777d17911111111177711117771111777771111117777911117777d111117791111777791111d77777777777779111d777711111197777d77d11111111111111111111
1111111111111111d77771117777117911111111177711117791111d77771111117777911117777d1111d77d11119777911111177777d1777777111d777711111197777771111111111111111111111
1111111111111111177779117771117911111111d77d11177791111d77771111117777911117777d1111777d1111977791111111177d11177777111d777711111197777d11111111111111111111111
111111111111111117777719771111779779777d779111177791111d77771111117777911117777d1111777d1111977791111111177111197777111d777711111197777111111111111111111111111
11111111111111111d77777771111177d1111117771111d77771111d77771111117777911117777d111177791111977791111111d71111197777111d777711111197777111111111111111111111111
1111111111111111117777771111117911111117711111d77771111d77771111117777911117777d1119777711117777911111117d11111977771119777711111197777111111111111111111111111
111111111111111111d777777111117911111d7711111117777711977777111111777771111777791d1177777117777771d111177777779977771117777791d11177777d11111d11111111111111111
1111111111111111111d77777711117911117791111111177777777d777797111777777d11177777791177777779d7777d71117777777777777911d7777777711d7777777d117711111111111111111
11111111111111111111177777777d79197771111111111177777d117777711119777771111d7777d111d77777d11777771119777777777771111117777777111111d7777777d111111111111111111
11111111111111111111119777777777777d111111111111d7771111d7771111119777111111777d11111977711119777111d77d11d9777d11111111197771111111117777d11111111111111111111
1111111111111111111111111977777911111111111111111d7111111d71111111117111111117d11111119d111111d91111d711111117111111111111d911111111111d71111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    """))

def on_update_interval():
    global menu, partida, nivel
    if menu:
        scene.set_background_image(assets.image("""
            myImage4
            """))
        if controller.A.is_pressed():
            menu = False
    else:
        if not (partida):
            partida = True
            nivel = 1
            MostrarLore()
            CreacionPersonajes()
            GenerarNivel()
        else:
            GenerarMinimapa()
game.on_update_interval(1, on_update_interval)
